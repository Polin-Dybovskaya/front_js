<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
    <link href='https://unpkg.com/boxicons@2.O.9/css/boxicons.min.css' геl='stylesheet'></link>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HW4</title>
</head>
<body>
    <h2>Bank Accounts</h2>
    <div class="d-flex justify-content-center ">
        <div class="form-select-lg mb-3">
          <select  id='filter' onchange="sort()">
              <option value='none'>Choose the filter</option>
              <option value='card'>By card</option>
              <option value='money'>By money</option>
              <option value='country'>By country</option>
              <option value='firstname'>By first name</option>
              <option value='lastname'>By last name</option>
           </select>

        </div>
</div>
    <div class="products"></div>
    
<script >
//БЕЗ ФИЛЬТРОВ/
console.log('normal')
        // считывание джейсон файла
        let http = new XMLHttpRequest();
        http.open('get', 'j.json', true);
        http.send();
        http.onload = function(){
            
        //считывание
            let products = JSON.parse(this.responseText);
            let output = "";
            jsonData=products
                        
            
            for(let item of jsonData){
         output += `
            <div class="product">
               <img src="${item.avatar}" alt="${item.avatar}">
               <p class="price">${item.first_name} ${item.last_name}</p>
               <br>
               <span class='title'>${item.card}</span>
               <br>
                <span class="price"> ${item.country}</span>
               <p class="cart">$ ${item.money}<i class="bx bx-cart-alt"></i></p>
            </div>
         `;
      }
      document.querySelector(".products").innerHTML = output;
}
// СОРТИРОВКИ

    function sort(){
        console.log('started')
        // считывание джейсон файла
        let http = new XMLHttpRequest();
        http.open('get', 'j.json', true);
        http.send();
        http.onload = function(){
            
        //считывание
            let products = JSON.parse(this.responseText);
            let output = "";
            jsonData=products

            let filter=document.getElementById("filter")
        //FIRST
        if(filter.value == 'firstname'){
                console.log('sort card')
                jsonData=jsonData.sort((a, b) => {
                const nameA = a.first_name.toUpperCase(); 
                const nameB = b.first_name.toUpperCase(); 
                if (nameA < nameB) {
                    return -1;
                }
                if (nameA > nameB) {
                    return 1;
                }

                return 0;
                });   
            
                for(let item of jsonData){
                    output += `
                        <div class="product">
                        <img src="${item.avatar}" alt="${item.avatar}">
                        <p class="price">${item.first_name} ${item.last_name}</p>
                        <br>
                        <span class='title'>${item.card}</span>
                        <br>
                            <span class="price"> ${item.country}</span>
                        <p class="cart"> $ ${item.money}<i class="bx bx-cart-alt"></i></p>
                        </div>
                    `;
                    }
                    document.querySelector(".products").innerHTML = output;
                            }
    //LAST
        if(filter.value == 'lastname'){
                console.log('sort card')
                jsonData=jsonData.sort((a, b) => {
                const nameA = a.last_name.toUpperCase(); 
                const nameB = b.last_name.toUpperCase(); 
                if (nameA < nameB) {
                    return -1;
                }
                if (nameA > nameB) {
                    return 1;
                }

                return 0;
                });   
            
                for(let item of jsonData){
                    output += `
                        <div class="product">
                        <img src="${item.avatar}" alt="${item.avatar}">
                        <p class="price">${item.last_name} ${item.first_name}</p>
                        <br>
                        <span class='title'>${item.card}</span>
                        <br>
                            <span class="price"> ${item.country}</span>
                        <p class="cart">$ ${item.money}<i class="bx bx-cart-alt"></i></p>
                        </div>
                    `;
                    }
                    document.querySelector(".products").innerHTML = output;
                            }
        
    //COUNTRY
        if(filter.value == 'country'){
                console.log('sort card')
                jsonData=jsonData.sort((a, b) => {
                const nameA = a.country.toUpperCase(); 
                const nameB = b.country.toUpperCase(); 
                if (nameA < nameB) {
                    return -1;
                }
                if (nameA > nameB) {
                    return 1;
                }

                return 0;
                });   
            
                for(let item of jsonData){
                    output += `
                        <div class="product">
                        <img src="${item.avatar}" alt="${item.avatar}">
                        <p class="price">${item.first_name} ${item.last_name}</p>
                        <br>
                        <span class='title'>${item.card}</span>
                        <br>
                            <span class="price"> ${item.country}</span>
                        <p class="cart">$ ${item.money}<i class="bx bx-cart-alt"></i></p>
                        </div>
                    `;
                    }
                    document.querySelector(".products").innerHTML = output;
                            }
    //CARD
            if(filter.value == 'card'){
                console.log('sort card')
                jsonData=jsonData.sort((a, b) => {
                const nameA = a.card.toUpperCase(); 
                const nameB = b.card.toUpperCase(); 
                if (nameA < nameB) {
                    return -1;
                }
                if (nameA > nameB) {
                    return 1;
                }

                return 0;
                });   
            
                for(let item of jsonData){
                    output += `
                        <div class="product">
                        <img src="${item.avatar}" alt="${item.avatar}">
                        <p class="price">${item.first_name} ${item.last_name}</p>
                        <br>
                        <span class='title'>${item.card}</span>
                        <br>
                            <span class="price"> ${item.country}</span>
                        <p class="cart">$ ${item.money}<i class="bx bx-cart-alt"></i></p>
                        </div>
                    `;
                    }
                    document.querySelector(".products").innerHTML = output;
                            }
    //MONEY
            if(filter.value == 'money'){
            jsonData=jsonData.sort((a, b) => a.money - b.money);   
            
            for(let item of jsonData){
            output += `
                <div class="product">
                <img src="${item.avatar}" alt="${item.avatar}">
                <p class="price">${item.first_name} ${item.last_name}</p>
                <br>
                <span class='title'>${item.card}</span>
                <br>
                    <span class="price"> ${item.country}</span>
                <p class="cart">$ ${item.money}<i class="bx bx-cart-alt"></i></p>
                </div>
            `;
        }
        document.querySelector(".products").innerHTML = output;
        
            }
        }

    }
    </script> 
 </body>
</html>